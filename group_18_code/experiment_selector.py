import time
import multiprocessing as mp
from covid import main

def experiment_caller (exp_n, seed):
    
    
    print("doing experiment of no measures number: {} with seed: {}".format(exp_n, seed))
    foldersave = 'exp_no_measures_' + str(exp_n)
    main([ '-foldersave',  foldersave, '-random', str(1), '-seed', str(seed)])
    
    
    print("doing experiment of social distacing_1 number: {} with seed: {}".format(exp_n, seed))
    foldersave = 'exp_social_distancing1' + str(exp_n)
    main([ '-social_distancing', str(1) , '-foldersave',  foldersave, '-random', str(1), '-seed', str(seed)  ])
    


if __name__ == '__main__':
    
    """
    foldername = 'multiprocessingnrinfect'
    maxinfect = 23
    start_time = time.time()
    
    for x in range(3, maxinfect):
       experiment_caller(x,foldername + str(x)) 
    
    
    print("--- %s seconds ---" % (time.time() - start_time))    
    """
    
    
    #list of pre selected randmon integers for the seeds
    #obtained randomly
    seeds = [260889172, 209055783, 564513443, 177056478, 490326494, 960717895, 437523, 760145017, 688411376, 13335807, 
             840217042, 67182225, 981148424, 624325389, 497239258, 931181995, 653959854, 527312653, 129174166, 450341192, 
             187958216, 971007345, 689536209, 824057534, 985253993, 57877566, 834173766, 843590063, 737518731, 94955636, 556886278, 
             671649009, 225556830, 913198836, 190033014, 152787920, 110676439, 989633547, 210508818, 811705448, 592223472, 706761468,
             32023029, 873013187, 699515420, 411372949, 145859397, 204885688, 196970956, 353302153, 13739099, 189753110, 93917041,
             78221820, 927899933, 421956610, 81794991, 354483534, 957944864, 629348384, 756918171, 129737233, 311496442, 944650260,
             885439979, 823000816, 588045806, 748676731, 221168233, 947772761, 571605151, 770132523, 973552093, 1291437, 669967390,
             140672867, 393555176, 966759091, 564472772, 536677622, 716096509, 455433000, 29712811, 263041711, 892902192, 768322324, 
             876498998, 103054349, 188464796, 837224256, 855702863, 871044453, 165430950, 870863419, 762927319, 212359551, 643590719,
             854760009, 64394496, 461825545, 748869166, 286550891, 505085780, 544149104, 290277598, 756935334, 714985217, 381476175, 
             481184290, 623602434, 486326001, 735758266, 42691422, 800882035, 333666037, 327190015, 464138052, 775900893, 825775278,
             102166284, 816401171, 608123625, 239357929, 705493635, 758599447, 127575271, 196945846, 78538022, 908308919, 837502432,
             270715090, 854801744, 630731051, 586029749, 975329725, 571423517, 667797446, 325430610, 470320466, 178437475, 200422858,
             528576661, 41862879, 577001967, 760358416, 532533894, 102032586, 674836488, 784872031, 68076023, 336987968, 834556256,
             38959868, 390938181, 840440551, 374565108, 832725638, 467535073, 241000691, 598210066, 864321359, 198875289, 541035526,
             268412942, 105428540, 435928127, 455240303, 372615469, 440889176, 870648070, 944216876, 562624565, 972754045, 479268305,
             540425602, 708054889, 23906039, 73178636, 101260483, 359254, 827184966, 205912807, 377021875, 234044959, 637758084,
             426504696, 721481975, 883718996, 662514746, 418518593, 685593985, 659030653, 648197397, 678731143, 515145527, 424449824,
             836446146, 394783948, 478137252, 585706549, 840010803, 885508003, 569719739, 754456752, 746878863, 728618387, 415752647,
             619359315, 518060393, 161343769, 149175744, 488354640, 483496998, 331223100, 391283455, 655537784, 620700841, 330942235,
             992187296, 46363008, 304716910, 277030627, 29866698, 551312435, 624481964, 114923156, 485350676, 958932154, 625213714,
             117407245, 834816683, 158417728, 979919387, 376825987, 477729318, 70630691, 355237771, 224128843, 557323610, 910491364,
             859399048, 844755620, 881672984, 1600511, 198306545, 1650878, 864590626, 844850824, 265284917, 378766209, 340388202,
             641901681, 628562076, 114070709, 883725633, 161921252, 823476390, 667678154, 905329090, 810489039, 997825216, 759396916,
             214422386, 997759304, 611272290, 872588077, 746360026, 100083002, 721970510, 2028118, 149826188, 995143822, 415442743, 
             339502652, 830971725, 453684166, 929325800, 553173622, 369192804, 791070868, 396812870, 905605412, 436360907, 84900882,
             88279322, 131894303, 250132058, 52573570, 681721092, 771420303, 538359326, 350181615, 781329937, 642987871, 336397921,
             391882653, 184399684, 409539475, 632899226, 605492897, 606658713, 442400709, 533370929, 746676939, 168213619, 146331958,
             724708259, 40278959, 47539342, 400673920, 438197179, 661070250, 959737219, 173044794, 154693593, 183283490, 650745121, 
             602138597, 672650754, 387027468, 860512295, 662842322, 755596471, 118730654, 541702704, 865363794, 411028225, 141589589,
             853066116, 587544852, 583198231, 877540923, 644255160, 616520377, 871775169, 147667957, 81528524, 437824170, 929907408,
             706878176, 589550603, 895875502, 265189858, 899881282, 560575693, 842427116, 324193319, 968633371, 225236205, 213885305,
             155624151, 100917608, 61373889, 903777968, 40605133, 80604967, 151096897, 920498074, 281173850, 225218068, 447944753, 
             667677189, 471501690, 251618759, 570582435, 568605615, 909568103, 268747632, 472944075, 393410053, 764317635, 945663847,
             468642824, 509211867, 107649936, 857511124, 937190956, 894876958, 284023867, 767785634, 532548247, 51531272, 556283595, 
             17515237, 246243293, 506912271, 463997210, 648024820, 170176722, 333475513, 809845576, 211052107, 417561765, 125098526, 
             688721371, 177505580, 681944473, 109958326, 563541208, 909768458, 956103152, 377558372, 994438924, 555942189, 745171787,
             572444561, 661414812, 661070445, 774149076, 714577670, 569893242, 565530224, 116311652, 57654906, 741828923, 991900770, 
             526632764, 130433370, 570915524, 913432939, 930593634, 127506874, 625311054, 921821549, 408762153, 881232954, 269195184,
             378991977, 875623275, 580062236, 703624595, 978427114, 910184175, 600131462, 833490619, 473323483, 751868056, 968511559,
             423727653, 560034481, 11513495, 583723109, 269822951, 366463718, 926339901, 624753647, 103203662, 174423793, 9767308, 
             970949514, 546824429, 645816337, 185624341, 837272487, 968780478, 442129607, 107339153, 857502304, 688429748, 333692200,
             537584105, 333359284, 675479651, 611938648, 215210575, 158581496, 912498058, 832654065, 372480775, 508012459, 62167983,
             148241680, 873985589, 791792850, 335344400, 418170614, 657458469, 680169601, 410868664, 437028096, 902480748, 990654414,
             89219320, 367262368, 408139074, 743031267, 595060259, 772597283, 863585173, 268173461, 597388269, 961256317, 684972893, 
             405484751, 751188123, 358877451, 568810080, 854160860, 375447956, 64729349] 
    
    
    nr_experiments = 100
    
    pool = mp.Pool()
    start_time = time.time()
    foldername = 'exp'
    for control,x  in enumerate(seeds[0:nr_experiments]):
        pool.apply_async(experiment_caller, args = (control, x, ))
         
    
    
    pool.close()
    pool.join()
    print("--- %s seconds ---" % (time.time() - start_time))       
       
